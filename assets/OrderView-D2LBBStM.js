import{_ as U,d as a,e as $,h as E,i as O,c as r,a as l,f as c,w as p,v as f,t as d,F as C,j as w,o as i,k as T}from"./index-BG-Ycv6c.js";const P={class:"tbl"},A=["onUpdate:modelValue","onClick"],B=["onClick"],M=["onClick"],j=["onClick"],F=["onClick"],Q={class:"tbl"},q=["onClick"],z=["onClick"],G={__name:"OrderView",setup(H){const v=a(""),b=a(""),k=a(0),m=a(0),o=a([]),u=a({no:0,total:0,orderList:[{id:0,name:"",price:0,count:0}]}),x=a([]),h=()=>{console.log(v.value),o.value.push({no:new Date().getTime(),name:v.value,desc:b.value,price:k.value,stock:m.value}),v.value="",k.value=0,console.log(o.value)};$(()=>{console.log("onMounted"),setTimeout(()=>{console.log("setTimeout"),o.value=[{id:1,name:"珍珠奶茶",desc:"香濃奶茶搭配QQ珍珠",price:50,stock:100},{id:2,name:"冬瓜檸檬",desc:"清新冬瓜配上新鮮檸檬",price:45,stock:100},{id:3,name:"翡翠檸檬",desc:"綠茶與檸檬的完美結合",price:55,stock:100},{id:4,name:"四季春茶",desc:"香醇四季春茶，回甘無比",price:45,stock:100},{id:5,name:"阿薩姆奶茶",desc:"阿薩姆紅茶搭配香醇鮮奶",price:50,stock:100},{id:6,name:"芒果綠茶",desc:"芒果與綠茶的獨特風味",price:55,stock:100},{id:7,name:"抹茶拿鐵",desc:"抹茶與鮮奶的絕配",price:60,stock:100}]},1e3)});let L=0;const _=n=>{let t=o.value.findIndex(e=>e.id==n);console.log(o.value),o.value[t].stock++},y=n=>{let t=o.value.findIndex(e=>e.id==n);console.log(o.value),o.value[t].stock>0&&o.value[t].stock--},g=E(()=>u.value.orderList.reduce((n,t)=>n+t.price*t.count,0)),V=n=>{u.value.no===0&&(u.value.no=new Date().getTime(),u.value.orderList.splice(0,1));let t=!1;for(let e=0;e<u.value.orderList.length;e++)if(u.value.orderList[e].id===n.id){u.value.orderList[e].count++,t=!0;break}t||u.value.orderList.push({id:n.id,name:n.name,price:n.price,count:1}),console.log(u.value),y(n.id)},D=n=>{o.value.findIndex(e=>e.id==n.id)!=-1&&(n.count++,y(n.id))},I=n=>{const t=o.value.findIndex(e=>e.id==n.id);n.count>0&&(n.count--,o.value[t].stock++)},N=()=>{u.value.total=g.value,x.value.push(u.value),u.value={no:0,total:0,orderList:[{id:0,name:"",price:0,count:0}]}};O(()=>{clearInterval(L)});const S=n=>{n.edit=!1};return(n,t)=>(i(),r(C,null,[l("div",null,[t[4]||(t[4]=l("h1",null,"菜單",-1)),t[5]||(t[5]=l("p",null,"品項如下:",-1)),p(l("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>v.value=e),placeholder:"Enter your name"},null,512),[[f,v.value]]),c(d(v.value)+" ",1),p(l("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>b.value=e),placeholder:"Enter your desc"},null,512),[[f,b.value]]),c(d(b.value)+" price:",1),p(l("input",{type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>k.value=e),placeholder:"Enter your price"},null,512),[[f,k.value]]),c(d(k.value)+" stock:",1),p(l("input",{type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>m.value=e),placeholder:"Enter your stock"},null,512),[[f,m.value]]),c(d(m.value)+" ",1),l("button",{type:"button",onClick:h},"Add Product")]),c(" "+d(o.value)+" ",1),l("table",P,[t[6]||(t[6]=l("tr",null,[l("th",null,"Name"),l("th",null,"Desc"),l("th",null,"Stock"),l("th",null,"Price"),l("th",null,"StockAdj"),l("th",null,"Delete")],-1)),(i(!0),r(C,null,w(o.value,e=>(i(),r("tr",{key:e.id},[l("td",null,[p(l("input",{type:"text","onUpdate:modelValue":s=>e.name=s,onClick:s=>e.edit=!0,placeholder:"Enter your name"},null,8,A),[[f,e.name]]),p(l("button",{onClick:s=>S(e)},"save",8,B),[[T,e.edit]])]),l("td",null,d(e.desc),1),l("td",null,d(e.stock),1),l("td",null,d(e.price),1),l("td",null,[l("button",{onClick:s=>_(e.id)},"+",8,M),l("button",{onClick:s=>y(e.id)},"-",8,j)]),l("td",null,[l("button",{onClick:s=>V(e)},"order",8,F)])]))),128))]),t[8]||(t[8]=l("br",null,null,-1)),c(" "+d(u.value.no)+" ",1),l("button",{onClick:N},"Apply Order"),l("table",Q,[t[7]||(t[7]=l("tr",null,[l("th",null,"Name"),l("th",null,"Price"),l("th",null,"Count")],-1)),(i(!0),r(C,null,w(u.value.orderList,e=>(i(),r("tr",{key:e.id},[l("td",null,d(e.name),1),l("td",null,d(e.price),1),l("td",null,d(e.count),1),l("td",null,[l("button",{onClick:s=>D(e)},"+",8,q)]),l("td",null,[l("button",{onClick:s=>I(e)},"-",8,z)])]))),128))]),c(" "+d(g.value)+" ",1),t[9]||(t[9]=l("br",null,null,-1)),(i(!0),r(C,null,w(x.value,e=>(i(),r("div",{style:{border:"1px solid #000"},key:e.id},d(e),1))),128))],64))}},K=U(G,[["__scopeId","data-v-976bff2c"]]);export{K as default};
